<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Create a New Item — Mulebay</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <header class="header">
    <div class="container header__inner">
      <a class="brand" href="{{ url_for('main.goto_browse_items_page') }}">
        <span class="brand__dot"></span> Mulebay
      </a>
      <nav class="nav" aria-label="Primary">
        <a href="{{ url_for('main.goto_browse_items_page') }}">Browse</a>
        <a href="{{ url_for('profile.goto_profile_page') }}">Profile</a>
      </nav>
      <div class="actions">
        <span class="badge">Sell</span>
      </div>
    </div>
  </header>

  <main class="page container">
  <!-- ONE form spanning both columns -->
  <form id="createForm" class="product" method="POST" enctype="multipart/form-data">

    <!-- Left: image upload area -->
    <section class="gallery" aria-label="Item image">
      <div class="gallery__stage upload-stage"
           onclick="document.getElementById('fileInput').click()">
        <img id="stage" src="/static/assets/item_placeholder.svg" alt="">
        <div class="upload-overlay"><span>Click to upload image</span></div>
      </div>

      <!-- This input is now INSIDE the form -->
      <input type="file" id="fileInput" name="image_file"
             accept="image/*" style="display:none" onchange="previewImage(event)">
    </section>

    <!-- Right: fields -->
    <aside class="buybox card">
      <h1 class="buybox__title">Create a New Item</h1>

      <!-- remove the inner <form>; keep the fields -->
      <div class="create-item-form">
        <label>Name
          <input type="text" name="name" required>
        </label>

        <label>Description
          <textarea name="description" rows="3" required></textarea>
        </label>

        <label>Price ($)
          <input type="number" step="0.01" name="price" required>
        </label>

        <label>Condition
          <select name="condition" required>
            <option value="New">New</option>
            <option value="Used — like new">Used — like new</option>
            <option value="Used — good">Used — good</option>
            <option value="Used — fair">Used — fair</option>
          </select>
        </label>

        <fieldset class="payment-options">
          <legend>Payment Options</legend>
          <label><input type="checkbox" name="payment_options" value="Cash"> Cash</label>
          <label><input type="checkbox" name="payment_options" value="Venmo"> Venmo</label>
          <label><input type="checkbox" name="payment_options" value="Zelle"> Zelle</label>
        </fieldset>

        <button class="btn" type="submit">Create Item</button>
      </div>
    </aside>

  </form>
</main>


  <footer class="footer">
    <div class="container footer__inner">
      <span>© 2025 Mulebay</span>
      <a href="{{ url_for('main.goto_browse_items_page') }}">Back to browse</a>
    </div>
  </footer>

  <script>
  function previewImage(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.getElementById('stage');
        img.src = e.target.result;
        img.classList.add('visible');
      };
      reader.readAsDataURL(file);
    }
  }
</script>

</body>
</html>
